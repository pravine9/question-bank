function e(e,n){var t;if(!e||!n)return!1;if(e.is_free)return n.toLowerCase().trim()===e.correct_answer.toLowerCase().trim();if(e.is_calculation){const r=parseFloat(n),s=null!=(t=e.correct_answer_number)?t:parseFloat(e.correct_answer);if(isNaN(r)||isNaN(s))return!1;const o=Math.abs(.05*s);return Math.abs(r-s)<=o}const r=e.correct_answer_number;return null!=r&&parseInt(n)===r}function n(e){if(e.is_calculation)return e.correct_answer||"Calculation required";const n=e.correct_answer_number;if(null!=n&&e.answers){const t=e.answers.find(e=>e.answer_number===n);return t?t.text:e.correct_answer||"Unknown"}return e.correct_answer||"Unknown"}function t(e){return e?e.replace(/\r\n\r\n/g,"<br><br>").replace(/\r\n/g,"<br>").replace(/\n\n/g,"<br><br>").replace(/\n/g,"<br>"):""}function r(e,n=!1){if(void 0!==window.DOMPurify&&void 0!==window.marked)try{const t=n?window.marked.parseInline(e):window.marked.parse(e);return window.DOMPurify.sanitize(t)}catch(t){return console.warn("Error processing markdown:",t),e}return e}function s(e){return e?document.querySelector(e):null}function o(e){e.querySelectorAll('img[src^="resources/"]').forEach(e=>{const n=e;n.style.cursor="pointer",n.onclick=()=>window.open(n.src,"_blank")});e.querySelectorAll('a[href$=".pdf"]').forEach(e=>{e.target="_blank"})}!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))n(e);new MutationObserver(e=>{for(const t of e)if("childList"===t.type)for(const e of t.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&n(e)}).observe(document,{childList:!0,subtree:!0})}function n(e){if(e.ep)return;e.ep=!0;const n=function(e){const n={};return e.integrity&&(n.integrity=e.integrity),e.referrerPolicy&&(n.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?n.credentials="include":"anonymous"===e.crossOrigin?n.credentials="omit":n.credentials="same-origin",n}(e);fetch(e.href,n)}}();let a="hidden";function i(){const e=document.getElementById("checkBtn"),n=document.getElementById("revealBtn");if(e&&n)switch(a){case"hidden":e.textContent="Check",n.textContent="Reveal";break;case"checked":e.textContent="Hide",n.textContent="Reveal";break;case"revealed":e.textContent="Check",n.textContent="Hide"}}const c={initPdfViewer:function(){console.log("PDF viewer initialized")},renderQuestion:function(e,n={}){const{text:t="#questionText",title:c="#questionTitle",img:l="#questionImage",options:d="#answerOptions",input:u="#calculatorInput",unit:w="#answerUnit",feedback:f="#feedback",answer:p="#answer",explanation:y="#explanation"}=n,m=s(t),b=s(c),h=s(l),g=s(d),k=s(u),v=s(w),_=s(f),x=s(p),C=s(y),E=!1!==n.showInput,L=n.reviewMode||!1,M=n.userAnswer||"";if(b){const n=e.title||"",t=r(n,!(/\n/.test(n)||/(^|\n)\s*\*\s/.test(n)));void 0!==window.DOMPurify&&void 0!==window.marked?b.innerHTML=t:b.textContent=t,o(b)}if(m){const n=r(e.text||"",!1);void 0!==window.DOMPurify&&void 0!==window.marked?m.innerHTML=n:m.textContent=n,o(m)}if(h&&e.resource_image?(h.src=e.resource_image,h.style.display="",h.style.cursor="pointer",h.onclick=()=>window.open(e.resource_image,"_blank")):h&&(h.style.display="none"),g&&e.answers&&e.answers.length>0&&(g.innerHTML="",g.style.display="",e.answers.forEach(n=>{const t=document.createElement("label"),r=document.createElement("span");if(r.textContent=n.text,t.appendChild(r),L){const r=M===n.answer_number.toString(),s=e.correct_answer_number===n.answer_number;r&&t.classList.add("user-selected"),s?t.classList.add("correct-answer"):r&&t.classList.add("incorrect-answer")}else{const e=document.createElement("input");e.type="radio",e.name="answer",e.value=n.answer_number.toString(),e.dataset.answer=n.text,t.insertBefore(e,r),t.addEventListener("click",n=>{n.preventDefault();const r=t.classList.contains("selected");g.querySelectorAll("label").forEach(e=>e.classList.remove("selected")),r?(e.checked=!1,e.dispatchEvent(new Event("change",{bubbles:!0}))):(t.classList.add("selected"),e.checked=!0,e.dispatchEvent(new Event("change",{bubbles:!0})))})}g.appendChild(t)})),k&&e.is_calculation&&(k.style.display=E?"":"none",E)){const e=k.querySelector("input");e&&(e.value="",e.focus())}v&&e.answer_unit&&(v.textContent=e.answer_unit,v.style.display=E?"":"none"),_&&(_.textContent="",_.className="feedback",_.style.display="none"),x&&(x.innerHTML="",x.className="answer",x.style.display="none"),C&&(C.innerHTML="",C.className="explanation",C.style.display="none"),a="hidden",i()},displayAnswer:function(e,n,t){var r,s,o,c;const l=document.getElementById("feedback"),d=document.getElementById("answer"),u=document.getElementById("explanation");if("hide"===n)return[l,d,u].forEach(e=>{e&&(e.textContent="",e.className=e.id,e.style.display="none")}),a="hidden",i(),"hidden";if("check"===n){if(!t)return alert("Please select an answer first"),a;const n=window.evaluateAnswer;if(!n)return console.warn("evaluateAnswer function not available"),a;const r=n(e,t);l&&(l.textContent=r?"Correct!":"Incorrect",l.className=r?"feedback correct":"feedback incorrect",l.style.display="block"),d&&(d.style.display="none"),u&&(u.style.display="none"),a="checked"}else if("reveal"===n){if(l&&(l.textContent="",l.className="feedback",l.style.display="none"),d){const n=null!=(s=null==(r=window.getCorrectAnswerText)?void 0:r.call(window,e))?s:"Unknown";d.innerHTML="<strong>Correct Answer:</strong> ".concat(n).concat(e.answer_unit?" "+e.answer_unit:""),d.style.display="block"}if(u&&e.why){const n=null!=(c=null==(o=window.formatExplanation)?void 0:o.call(window,e.why))?c:e.why;u.innerHTML="<strong>Explanation:</strong> ".concat(n),u.style.display="block"}a="revealed"}return i(),a},getCurrentDisplayState:function(){return a}},l={results:[],totalTests:0,averageScore:0,bestScore:0,totalTime:0};export{l as E,e,t as f,n as g,c as q};
//# sourceMappingURL=history-Dd79jojy.js.map
